---
title: "Docker Advanced Topic and deploying flask-application using docker compose concept"
datePublished: Sat Jun 03 2023 14:17:53 GMT+0000 (Coordinated Universal Time)
cuid: clig2wqoy000609mi3r756jby
slug: docker-advanced-topic-and-deploying-flask-application-using-docker-compose-concept
cover: https://cdn.hashnode.com/res/hashnode/image/upload/v1685801698465/4354446f-1574-425b-b75a-59a1cf2116e9.jpeg
tags: docker, devops, docker-compose, docker-network, devops-journey

---

Docker Advanced Topics:

1. Docker Volume
    
2. Docker Network
    
3. Docker Compose
    
4. Docker Swarm
    
    ### **<mark>Docker Volume</mark>**
    
    In Docker, a volume is a mechanism used to persist data generated by containers or share data between containers. It provides a way to store and manage data independently of the container lifecycle.
    
    When you create a volume in Docker, it is managed by Docker itself and can be attached to one or more containers. The data stored in a volume is preserved even if the container using it is removed or replaced. This allows you to separate the concerns of data persistence from the lifecycle of the containers.
    
    Volumes can be created and managed using the Docker command-line interface (CLI) or through Docker Compose files.
    
    **What is <mark>WORKDIR</mark> in Dockerfile & Concept of Volume and why it is important in the event of a Docker container getting deleted?**
    
    WORKDIR is similar to <mark>pwd</mark> in Linux, so we create a working directory where we will place files.
    
    Docker\`s virtual environment can be written to the directory, so to create that directory we use the WORKDIR directory name.  
    Here we will demonstrate by deploying Django-todo app and using docker volume.
    
    Step 1: We will create directories for each Docker image and copy the Pwd path.
    
    ![](https://cdn.hashnode.com/res/hashnode/image/upload/v1685797572913/33e471af-6cb2-4480-a4ca-5b688c31bf47.png align="center")
    
    Step2: volume is created for Django-todo  
    `docker volume create --name django-todo-volume --opt type=none --opt device=/home/ubuntu/volumes/django-todo/ --opt o=bind`
    

The above commands explain as docker volume creation is done with the <mark>name Django-todo-volume</mark> with <mark>option type none</mark>, <mark>no special type volume</mark> and <mark>option device is your directory</mark> where you will attach the volume and then the <mark>option to bind the container and volume.</mark>  
so you can move data bidirectional from container to volume and vice versa.

![](https://cdn.hashnode.com/res/hashnode/image/upload/v1685797847231/f8c972a7-1898-4fb4-ad45-cd8cf72b31ea.png align="center")

Step3: Inspect the volume

`docker volume inspect django_todo_volume`

![](https://cdn.hashnode.com/res/hashnode/image/upload/v1685798133455/ac61f27d-43ea-4643-859b-832bb1d60133.png align="center")

Step4: Killing the container here

![](https://cdn.hashnode.com/res/hashnode/image/upload/v1685798296455/5ad9af95-10b5-4409-af13-ce70bbf40015.png align="center")

Step5: Mounting volume now

![](https://cdn.hashnode.com/res/hashnode/image/upload/v1685798364813/cc147678-2952-4624-be65-4ec6a9bf3b7f.png align="center")

Understanding the above command--&gt; docker run -d(detached mode) -p(bind ports) --mount source=device volume, the target is folder within the container, so both will bind and the last parameter is the image name

## **<mark>Docker Network</mark>**

In Docker, a network is a communication bridge that allows containers to communicate with each other, with the host machine, and with external networks.  
Docker provides different types of networks to suit various network requirements:

a. Default Networks: Docker automatically creates three default networks when it is installed: <mark>bridge, host, and none</mark>.

b. User-Defined Networks: Docker allows you to create custom networks for your containers. User-defined networks provide better isolation and control over container communication.

\-Bridge Networks: You can create bridge networks using the `docker network create` command

\-Overlay Networks: Overlay networks are used for multi-host communication. They enable containers running on different Docker hosts to communicate with each other as if they are on the same network.

\-Macvlan Networks: Macvlan networks allow containers to be directly attached to a physical network interface on the host machine.

\-Custom Network Drivers: Docker also provides the option to develop custom network drivers to meet specific networking requirements.

c. Network Scopes: Docker networks can be scoped to different levels:

* Global Scope: Networks with the global scope are available to all Docker daemons running on the host or in a Docker Swarm cluster.
    
* Local Scope: Networks with local scope are only available to the Docker daemon where they are created.
    

## <mark>Docker Compose implemented in deploying Flask-app-ecs as an example</mark>

Docker Compose is a tool provided by Docker that allows you to define and manage multi-container applications. It simplifies the process of running multiple containers and configuring their interactions.

With Docker Compose, you can define your application's services, networks, and volumes in a YAML file called `docker-compose.yml`. This file describes the desired state of your application, including the containers to run, their configurations, and the networks and volumes they should be connected to.

`Sudo apt install docker-compose`

`git clone "url of your github"`

`vim docker-compose.yaml`

![](https://cdn.hashnode.com/res/hashnode/image/upload/v1685799466184/2a71c43f-8c7d-4b8e-ba03-f84df7a3a349.png align="center")

`docker-compose up -d`

![](https://cdn.hashnode.com/res/hashnode/image/upload/v1685799590664/3d9765dd-f9d2-404e-b96c-310418e54dbb.png align="center")

`docker ps`

![](https://cdn.hashnode.com/res/hashnode/image/upload/v1685799613930/ef7822b6-df4b-42e0-94ef-0493ba4c2560.png align="center")

Please zoom in and the rightmost column show up <mark>flask-app-ecs_flask-app_1</mark>

## **<mark>Docker Swarm</mark>**

**It is also called a cluster:**Â It is a container orchestration tool. You can do scaling, health monitoring, and Load balancing. But now **Kubernetes** is used these days.  
We will talk about this in my K8 (Kubernetes) blog later.

![](https://cdn.hashnode.com/res/hashnode/image/upload/v1685800028598/5cfec685-efd5-44cf-9e67-4b6fc0197dab.png align="center")